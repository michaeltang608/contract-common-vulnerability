const {
  time,
  loadFixture,
} = require("@nomicfoundation/hardhat-network-helpers");
const { anyValue } = require("@nomicfoundation/hardhat-chai-matchers/withArgs");
const { expect } = require("chai");
const { ethers } = require("hardhat");

describe("Faucet", function () {
  async function deploy() {
    const [firstSigner, secondSigner] = await ethers.getSigners();
    const UnderFlow = await ethers.getContractFactory("UnderFlow");
    const underFlow = await UnderFlow.deploy();

    return { underFlow, firstSigner, secondSigner }
  }


  describe('testAll', function () {
    it('测试向下溢出', async () => {

      const { underFlow, firstSigner, secondSigner } = await loadFixture(deploy)

      let tokenBalance = await underFlow.checkBalance(firstSigner.address)
      console.log(`token balance of first account is ${tokenBalance}`);

      //开始攻击
      await underFlow.transfer(firstSigner.address, 100);


    }
    );
  })

});

